<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.8.8"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>ETA/OS: Preemption</title>
        <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="dynsections.js"></script>
        <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
        <link href="doxygen.css" rel="stylesheet" type="text/css" />
        <link href="doxygen-bootstrap.css" rel="stylesheet" type="text/css"/>
        <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="doxy-boot.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
		<div class="row">
		    <div class="col-sm-2 logo">
			<img class="logo" alt="Logo" src="etaos-logo.svg"/>
		    </div>
		    <div class="col-sm-2 project-number">
                        <a class="navbar-brand">5.1.7</a>
		    </div>
	        </div>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Preemption<div class="ingroups"><a class="el" href="group__kernel.html">ETA/OS kernel</a> &raquo; <a class="el" href="group__sched.html">Scheduling core</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Preemption API.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Preemption:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<center><table><tr><td><img src="group__preempt.png" border="0" alt="" usemap="#group____preempt"/>
<map name="group____preempt" id="group____preempt">
<area shape="rect" id="node1" href="group__sched.html" title="ETA/OS scheduling support. " alt="" coords="5,5,120,32"/></map>
</td></tr></table></center>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gade4c97a2c2f6f07c15fdf04f06ae677e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gade4c97a2c2f6f07c15fdf04f06ae677e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__preempt.html#gade4c97a2c2f6f07c15fdf04f06ae677e">preempt_count_inc</a>&#160;&#160;&#160;<a class="el" href="group__sched.html#gae2e616c556fe40f3c614208e8b38c9a5">__preempt_add</a>(1)</td></tr>
<tr class="memdesc:gade4c97a2c2f6f07c15fdf04f06ae677e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Increase the preemption counter of the current thread by 1. <br /></td></tr>
<tr class="separator:gade4c97a2c2f6f07c15fdf04f06ae677e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3573895fae182f132ad53c9c74268dbe"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga3573895fae182f132ad53c9c74268dbe"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__preempt.html#ga3573895fae182f132ad53c9c74268dbe">preempt_count_dec</a>&#160;&#160;&#160;<a class="el" href="group__sched.html#ga958d7a379aac8fbb7b2b40902c406855">__preempt_sub</a>(1)</td></tr>
<tr class="memdesc:ga3573895fae182f132ad53c9c74268dbe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrease the preemption counter of the current thread by 1. <br /></td></tr>
<tr class="separator:ga3573895fae182f132ad53c9c74268dbe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa93580e45d2e6c581a96c72bfbd51212"><td class="memItemLeft" align="right" valign="top"><a class="el" href="include_2etaos_2types_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__preempt.html#gaa93580e45d2e6c581a96c72bfbd51212">preempt_should_resched</a> (void)</td></tr>
<tr class="memdesc:gaa93580e45d2e6c581a96c72bfbd51212"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the current thread should be rescheduled.  <a href="#gaa93580e45d2e6c581a96c72bfbd51212">More...</a><br /></td></tr>
<tr class="separator:gaa93580e45d2e6c581a96c72bfbd51212"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4e684afa3732b2e8b2f3bc70f055e1a2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__preempt.html#ga4e684afa3732b2e8b2f3bc70f055e1a2">preempt_schedule</a> (void)</td></tr>
<tr class="memdesc:ga4e684afa3732b2e8b2f3bc70f055e1a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reschedule the current run queue with preemption in mind.  <a href="#ga4e684afa3732b2e8b2f3bc70f055e1a2">More...</a><br /></td></tr>
<tr class="separator:ga4e684afa3732b2e8b2f3bc70f055e1a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad617f8d3f4bc68722e597787b960cde6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__preempt.html#gad617f8d3f4bc68722e597787b960cde6">preempt_schedule_irq</a> (void)</td></tr>
<tr class="memdesc:gad617f8d3f4bc68722e597787b960cde6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Preempt a thread from IRQ context.  <a href="#gad617f8d3f4bc68722e597787b960cde6">More...</a><br /></td></tr>
<tr class="separator:gad617f8d3f4bc68722e597787b960cde6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae2e616c556fe40f3c614208e8b38c9a5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__preempt.html#gae2e616c556fe40f3c614208e8b38c9a5">__preempt_add</a> (int num)</td></tr>
<tr class="memdesc:gae2e616c556fe40f3c614208e8b38c9a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add to the preemption counter of the current thread.  <a href="#gae2e616c556fe40f3c614208e8b38c9a5">More...</a><br /></td></tr>
<tr class="separator:gae2e616c556fe40f3c614208e8b38c9a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga958d7a379aac8fbb7b2b40902c406855"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__preempt.html#ga958d7a379aac8fbb7b2b40902c406855">__preempt_sub</a> (int num)</td></tr>
<tr class="memdesc:ga958d7a379aac8fbb7b2b40902c406855"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subtract from the preemption counter of the current thread.  <a href="#ga958d7a379aac8fbb7b2b40902c406855">More...</a><br /></td></tr>
<tr class="separator:ga958d7a379aac8fbb7b2b40902c406855"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab377aa939771256f71f426bd7650b01a"><td class="memItemLeft" align="right" valign="top">int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__preempt.html#gab377aa939771256f71f426bd7650b01a">preempt_counter_ptr</a> (void)</td></tr>
<tr class="memdesc:gab377aa939771256f71f426bd7650b01a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the preemption counter pointer of the current thread.  <a href="#gab377aa939771256f71f426bd7650b01a">More...</a><br /></td></tr>
<tr class="separator:gab377aa939771256f71f426bd7650b01a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaaa367ac52b57070819284f18643cc0a9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__preempt.html#gaaa367ac52b57070819284f18643cc0a9">preempt_dec_and_test</a> (void)</td></tr>
<tr class="memdesc:gaaa367ac52b57070819284f18643cc0a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decrease the preemption counter of the current thread and test it.  <a href="#gaaa367ac52b57070819284f18643cc0a9">More...</a><br /></td></tr>
<tr class="separator:gaaa367ac52b57070819284f18643cc0a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga30a3151baa4664f4c58d9f6e04c4df0e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__preempt.html#ga30a3151baa4664f4c58d9f6e04c4df0e">preempt_test</a> (void)</td></tr>
<tr class="memdesc:ga30a3151baa4664f4c58d9f6e04c4df0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test if preemption is enabled.  <a href="#ga30a3151baa4664f4c58d9f6e04c4df0e">More...</a><br /></td></tr>
<tr class="separator:ga30a3151baa4664f4c58d9f6e04c4df0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga74ed4ec841ea18a152916f55920b9a9e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__preempt.html#ga74ed4ec841ea18a152916f55920b9a9e">preempt_enable</a> (void)</td></tr>
<tr class="memdesc:ga74ed4ec841ea18a152916f55920b9a9e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable preemption.  <a href="#ga74ed4ec841ea18a152916f55920b9a9e">More...</a><br /></td></tr>
<tr class="separator:ga74ed4ec841ea18a152916f55920b9a9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0be0edad7c14b013f7a4083b645fed6b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__preempt.html#ga0be0edad7c14b013f7a4083b645fed6b">preempt_enable_no_resched</a> (void)</td></tr>
<tr class="memdesc:ga0be0edad7c14b013f7a4083b645fed6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enable preemption, but do never reschedule.  <a href="#ga0be0edad7c14b013f7a4083b645fed6b">More...</a><br /></td></tr>
<tr class="separator:ga0be0edad7c14b013f7a4083b645fed6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae772fcbd15beae355371d56d6f443566"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gae772fcbd15beae355371d56d6f443566"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__preempt.html#gae772fcbd15beae355371d56d6f443566">preempt_disable</a> (void)</td></tr>
<tr class="memdesc:gae772fcbd15beae355371d56d6f443566"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable preemption. <br /></td></tr>
<tr class="separator:gae772fcbd15beae355371d56d6f443566"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Preemption API. </p>
<p>Preemption is the act of (temporarily) interrupting a task to give other tasks the chance at <a class="el" href="class_c_p_u.html" title="Utility class to provide access to hardware. ">CPU</a> time. How often the scheduler steps in with preemption can be defined at compile time by changing the time slice. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gae2e616c556fe40f3c614208e8b38c9a5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __preempt_add </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add to the preemption counter of the current thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num</td><td>Number to add.</td></tr>
  </table>
  </dd>
</dl>
<p>Add to the preemption counter of the current thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num</td><td>Amount to substract from the preemption counter.</td></tr>
  </table>
  </dd>
</dl>
<p>Substracts <code>num</code> from struct <a class="el" href="structthread.html#a74cfe74c6e5cd8c26418fa7498578398" title="Preempt enable counter. ">thread::preempt_cnt</a>. </p>

<p><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__preempt_gae2e616c556fe40f3c614208e8b38c9a5_cgraph.png" border="0" usemap="#group__preempt_gae2e616c556fe40f3c614208e8b38c9a5_cgraph" alt=""/></div>
<map name="group__preempt_gae2e616c556fe40f3c614208e8b38c9a5_cgraph" id="group__preempt_gae2e616c556fe40f3c614208e8b38c9a5_cgraph">
<area shape="rect" id="node2" href="group__sched.html#gab377aa939771256f71f426bd7650b01a" title="Get a pointer to the preemption counter of the current thread. " alt="" coords="164,5,305,32"/><area shape="rect" id="node3" href="group__thread.html#ga739f7885bb2e863d7d39df7eea03afa5" title="Get a pointer to the current thread. " alt="" coords="353,5,459,32"/><area shape="rect" id="node4" href="group__arch_a_p_i.html#ga224ed7aae41f53a7d6f579ebbf3ba7fe" title="Get the run queue of the current CPU. " alt="" coords="507,5,635,32"/><area shape="rect" id="node5" href="group__sched.html#gaa01fb719e9758591f358e30bfb4729ff" title="Get the global run queue. " alt="" coords="683,5,789,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga958d7a379aac8fbb7b2b40902c406855"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void __preempt_sub </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subtract from the preemption counter of the current thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num</td><td>Number to substract.</td></tr>
  </table>
  </dd>
</dl>
<p>Subtract from the preemption counter of the current thread.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">num</td><td>Amount to add to the preemption counter.</td></tr>
  </table>
  </dd>
</dl>
<p>Will add <code>num</code> to struct <a class="el" href="structthread.html#a74cfe74c6e5cd8c26418fa7498578398" title="Preempt enable counter. ">thread::preempt_cnt</a>. </p>

<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__preempt_ga958d7a379aac8fbb7b2b40902c406855_cgraph.png" border="0" usemap="#group__preempt_ga958d7a379aac8fbb7b2b40902c406855_cgraph" alt=""/></div>
<map name="group__preempt_ga958d7a379aac8fbb7b2b40902c406855_cgraph" id="group__preempt_ga958d7a379aac8fbb7b2b40902c406855_cgraph">
<area shape="rect" id="node2" href="group__sched.html#gab377aa939771256f71f426bd7650b01a" title="Get a pointer to the preemption counter of the current thread. " alt="" coords="164,5,305,32"/><area shape="rect" id="node3" href="group__thread.html#ga739f7885bb2e863d7d39df7eea03afa5" title="Get a pointer to the current thread. " alt="" coords="353,5,459,32"/><area shape="rect" id="node4" href="group__arch_a_p_i.html#ga224ed7aae41f53a7d6f579ebbf3ba7fe" title="Get the run queue of the current CPU. " alt="" coords="507,5,635,32"/><area shape="rect" id="node5" href="group__sched.html#gaa01fb719e9758591f358e30bfb4729ff" title="Get the global run queue. " alt="" coords="683,5,789,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gab377aa939771256f71f426bd7650b01a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int* preempt_counter_ptr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the preemption counter pointer of the current thread. </p>
<dl class="section return"><dt>Returns</dt><dd>The preemption counter of the current thread.</dd></dl>
<p>Get the preemption counter pointer of the current thread.</p>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the preemption counter of the current thread.</dd></dl>
<p>Returns struct <a class="el" href="structthread.html#a74cfe74c6e5cd8c26418fa7498578398" title="Preempt enable counter. ">thread::preempt_cnt</a>. </p>

<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__preempt_gab377aa939771256f71f426bd7650b01a_cgraph.png" border="0" usemap="#group__preempt_gab377aa939771256f71f426bd7650b01a_cgraph" alt=""/></div>
<map name="group__preempt_gab377aa939771256f71f426bd7650b01a_cgraph" id="group__preempt_gab377aa939771256f71f426bd7650b01a_cgraph">
<area shape="rect" id="node2" href="group__thread.html#ga739f7885bb2e863d7d39df7eea03afa5" title="Get a pointer to the current thread. " alt="" coords="195,5,300,32"/><area shape="rect" id="node3" href="group__arch_a_p_i.html#ga224ed7aae41f53a7d6f579ebbf3ba7fe" title="Get the run queue of the current CPU. " alt="" coords="348,5,476,32"/><area shape="rect" id="node4" href="group__sched.html#gaa01fb719e9758591f358e30bfb4729ff" title="Get the global run queue. " alt="" coords="524,5,631,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaaa367ac52b57070819284f18643cc0a9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int preempt_dec_and_test </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Decrease the preemption counter of the current thread and test it. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if preemption is enabled and the THREAD_NEED_RESCHED_FLAG is set. </td></tr>
    <tr><td class="paramname">false</td><td>in any other case.</td></tr>
  </table>
  </dd>
</dl>
<p>If the preemption counter turns out to be 0, preemption is enabled. If that is the case, it doesn't immediatly mean that this function returns true. For that, should_resched also has to return true. </p>

<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__preempt_gaaa367ac52b57070819284f18643cc0a9_cgraph.png" border="0" usemap="#group__preempt_gaaa367ac52b57070819284f18643cc0a9_cgraph" alt=""/></div>
<map name="group__preempt_gaaa367ac52b57070819284f18643cc0a9_cgraph" id="group__preempt_gaaa367ac52b57070819284f18643cc0a9_cgraph">
<area shape="rect" id="node2" href="group__preempt.html#gab377aa939771256f71f426bd7650b01a" title="Get the preemption counter pointer of the current thread. " alt="" coords="423,5,564,32"/><area shape="rect" id="node6" href="group__preempt.html#gaa93580e45d2e6c581a96c72bfbd51212" title="Check if the current thread should be rescheduled. " alt="" coords="208,95,375,121"/><area shape="rect" id="node3" href="group__thread.html#ga739f7885bb2e863d7d39df7eea03afa5" title="Get a pointer to the current thread. " alt="" coords="612,56,717,83"/><area shape="rect" id="node4" href="group__arch_a_p_i.html#ga224ed7aae41f53a7d6f579ebbf3ba7fe" title="Get the run queue of the current CPU. " alt="" coords="765,56,893,83"/><area shape="rect" id="node5" href="group__sched.html#gaa01fb719e9758591f358e30bfb4729ff" title="Get the global run queue. " alt="" coords="941,56,1048,83"/><area shape="rect" id="node7" href="arch_2avr_2include_2asm_2bitops_8h.html#a885c4e4b78de84afaf562fffdf93f178" title="Return the value of bit nr. " alt="" coords="632,132,697,159"/><area shape="rect" id="node8" href="group__preempt.html#gada97a499438abc44548acb43e582dc73" title="Check if a reschedule is needed. " alt="" coords="437,107,550,133"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga74ed4ec841ea18a152916f55920b9a9e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void preempt_enable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enable preemption. </p>
<dl class="section note"><dt>Note</dt><dd>This function also reschedules if preempt_dec_and_test returns true. </dd></dl>

<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__preempt_ga74ed4ec841ea18a152916f55920b9a9e_cgraph.png" border="0" usemap="#group__preempt_ga74ed4ec841ea18a152916f55920b9a9e_cgraph" alt=""/></div>
<map name="group__preempt_ga74ed4ec841ea18a152916f55920b9a9e_cgraph" id="group__preempt_ga74ed4ec841ea18a152916f55920b9a9e_cgraph">
<area shape="rect" id="node2" href="group__preempt.html#gaaa367ac52b57070819284f18643cc0a9" title="Decrease the preemption counter of the current thread and test it. " alt="" coords="467,239,621,266"/><area shape="rect" id="node10" href="group__preempt.html#ga4e684afa3732b2e8b2f3bc70f055e1a2" title="Reschedule the current run queue with preemption in mind. " alt="" coords="168,575,296,602"/><area shape="rect" id="node3" href="group__preempt.html#gab377aa939771256f71f426bd7650b01a" title="Get the preemption counter pointer of the current thread. " alt="" coords="684,239,825,266"/><area shape="rect" id="node7" href="group__preempt.html#gaa93580e45d2e6c581a96c72bfbd51212" title="Check if the current thread should be rescheduled. " alt="" coords="671,177,838,203"/><area shape="rect" id="node4" href="group__thread.html#ga739f7885bb2e863d7d39df7eea03afa5" title="Get a pointer to the current thread. " alt="" coords="1127,543,1233,570"/><area shape="rect" id="node5" href="group__arch_a_p_i.html#ga224ed7aae41f53a7d6f579ebbf3ba7fe" title="Get the run queue of the current CPU. " alt="" coords="1347,594,1475,621"/><area shape="rect" id="node6" href="group__sched.html#gaa01fb719e9758591f358e30bfb4729ff" title="Get the global run queue. " alt="" coords="1583,645,1690,671"/><area shape="rect" id="node8" href="arch_2avr_2include_2asm_2bitops_8h.html#a885c4e4b78de84afaf562fffdf93f178" title="Return the value of bit nr. " alt="" coords="1768,898,1833,925"/><area shape="rect" id="node9" href="group__preempt.html#gada97a499438abc44548acb43e582dc73" title="Check if a reschedule is needed. " alt="" coords="909,165,1022,191"/><area shape="rect" id="node11" href="group__preempt.html#gac48128e72b303ea22d8ec641a9516b15" title="Reschedule the current run queue. " alt="" coords="344,689,419,715"/><area shape="rect" id="node12" href="group__atmega.html#ga45e277ef6f2d431ec2bf827fe3fe1127" title="Get the ID of the current CPU. " alt="" coords="1369,467,1454,494"/><area shape="rect" id="node13" href="group__sched.html#ga9897609e91b475d0c8214b63fd0a7312" title="Reschedule the current run queue. " alt="" coords="500,746,588,773"/><area shape="rect" id="node57" href="group__sched.html#gaa502c4a92f7b7008c0eca9c374d7f671" title="Check if a reschedule is required. " alt="" coords="914,1167,1017,1194"/><area shape="rect" id="node14" href="group__kernel.html#ga38f4f8022778edff29606cec22897bfc" title="Notify the CPU of a specific event. " alt="" coords="1139,746,1221,773"/><area shape="rect" id="node19" href="group__arch_a_p_i.html#gabc3ea24600f8a7b491077f26ccbbd5c8" title="Get the RQ of the given cpu. " alt="" coords="715,695,794,722"/><area shape="rect" id="node20" href="group__sched.html#ga6ddad0126e698368a5b68f214d8f06cc" title="Update the system clock. " alt="" coords="696,949,813,975"/><area shape="rect" id="node21" href="group__sched.html#ga017c639d6dbf8710ad60a22985116618" title="Signal threads that are waiting for an event. " alt="" coords="693,645,817,671"/><area shape="rect" id="node34" href="group__sched.html#ga550ca50260ef89432c99ba6dcc150644" title="Obtain the next runnable task of a run queue. " alt="" coords="669,594,840,621"/><area shape="rect" id="node35" href="group__sched.html#ga902ac489886eb8c3c23a644234e98bb1" title="Check if the algorithm wants to preempt the current thread. " alt="" coords="1125,949,1235,975"/><area shape="rect" id="node37" href="group__sched.html#gaaa7887e8e5c82701d2a90a29761a97ed" title="Reschedule policy. " alt="" coords="900,1066,1031,1093"/><area shape="rect" id="node41" href="group__sched.html#ga50b33afa078200d35ad86a7e10287291" title="Set the current thread for rq. " alt="" coords="683,1000,826,1041"/><area shape="rect" id="node42" href="group__sched.html#ga8e0a4597581707f45d23f718106be969" title="Prepare the a reschedule. " alt="" coords="896,746,1035,773"/><area shape="rect" id="node44" href="group__sched.html#ga65b901825618b5227439a55822e9785a" title="Switch context on a given run queue. " alt="" coords="691,847,819,874"/><area shape="rect" id="node46" href="group__sched.html#ga0b1c71305537a28e3a7194016f6b43e6" title="Update a run queue. " alt="" coords="926,391,1005,418"/><area shape="rect" id="node48" href="group__sched.html#ga13a5b1237d1c0238dd0432a2590e8195" title="Destroy the kill queue. " alt="" coords="905,215,1025,242"/><area shape="rect" id="node53" href="group__sched.html#ga2a33aa8e229c79764e00338e98b512ad" title="Kill the current thread if its marked for removal. " alt="" coords="1109,1202,1251,1229"/><area shape="rect" id="node15" href="arch_2avr_2include_2asm_2bitops_8h.html#ad394bdb06d1587dd749fef3e818e82ae" title="Set a bit in a register. " alt="" coords="1381,847,1442,874"/><area shape="rect" id="node16" href="arch_2avr_2include_2asm_2bitops_8h.html#af859dcc9aae25796813cd9b3cb375f18" title="Clear a bit in register. " alt="" coords="1376,1101,1447,1127"/><area shape="rect" id="node17" href="group__preempt.html#gae772fcbd15beae355371d56d6f443566" title="Disable preemption. " alt="" coords="1353,746,1470,773"/><area shape="rect" id="node18" href="group__preempt.html#ga0be0edad7c14b013f7a4083b645fed6b" title="Enable preemption, but do never reschedule. " alt="" coords="1317,797,1505,823"/><area shape="rect" id="node22" href="group__sched.html#ga21bff5f2e0f402ef8b0ccb687570a2fa" title="Signal a thread on a wake queue. " alt="" coords="888,645,1043,671"/><area shape="rect" id="node23" href="group__sched.html#gace05e070b7507c5df0d9ae2e6fa7eb50" title="Get the thread_queue the given thread is on. " alt="" coords="1121,594,1239,621"/><area shape="rect" id="node24" href="group__sched.html#gae1a79ba3d3d2d109c947be1ee5a03f3d" title="Remove a thread from a rq. " alt="" coords="1105,325,1255,367"/><area shape="rect" id="node32" href="group__sched.html#ga2284d061e42560a7bac2dac7c0aa682f" title="Remove a thread from a thread_queue. " alt="" coords="1091,645,1269,671"/><area shape="rect" id="node33" href="group__sched.html#ga6bfa8964506ed9b9b7cc8e04c2f2bbf1" title="Add a thread to a run queue. " alt="" coords="1114,797,1246,823"/><area shape="rect" id="node25" href="group__irq.html#ga518bb9818fc4064c745c7cdfc612b16b" title="Save IRQ flags and disable them. " alt="" coords="1338,390,1485,417"/><area shape="rect" id="node28" href="group__sched.html#ga79134da818e6f628f51093579aa51107" title="Remove a thread from the rq_list. " alt="" coords="1358,250,1465,277"/><area shape="rect" id="node30" href="group__irq.html#gac43df2a88dde564ea7f7c0331cb2aaae" title="Restore the IRQ flags. " alt="" coords="1370,337,1453,363"/><area shape="rect" id="node26" href="group__arch_a_p_i.html#ga53732d1458648e51671e939c0a929c75" title="Get the IRQ flags. " alt="" coords="1573,390,1701,417"/><area shape="rect" id="node27" href="group__arch_a_p_i.html#gafe72a49160d521a33bb905eca461a3d6" title="Disable the global interrupts. " alt="" coords="1579,441,1695,467"/><area shape="rect" id="node29" href="list_8h.html#ab1708206f0f7e0a56550b35372203ba5" title="Delete an entry from a linked list. " alt="" coords="1605,250,1668,277"/><area shape="rect" id="node31" href="group__arch_a_p_i.html#gaddf161a845a51a829878634b612b3b5a" title="Restore the IRQ flags. " alt="" coords="1561,338,1712,365"/><area shape="rect" id="node36" href="group__sched.html#ga334da66e6883352ef369f85803eefec4" title="should_resched_cputime" alt="" coords="1553,949,1720,975"/><area shape="rect" id="node38" href="group__sched.html#ga70e974d78d84a3ef849f69893ed2ca39" title="Reset the time slice for a thread. " alt="" coords="1111,999,1249,1026"/><area shape="rect" id="node39" href="arch_2avr_2include_2asm_2bitops_8h.html#a262511af13cb368a79082ebf51cad0c7" title="Clear a bit in register and return the value of nr before clearing. " alt="" coords="1116,1101,1244,1127"/><area shape="rect" id="node40" href="group__sched.html#ga0e68a5e318862b42f5472c212668056e" title="Check whether a thread is the idle thread or not. " alt="" coords="1585,1025,1688,1051"/><area shape="rect" id="node43" href="group__kernel.html#gada0281da446125e1f1a91dd476c4d6d9" title="Get the current CPU state. " alt="" coords="1128,442,1232,469"/><area shape="rect" id="node45" href="group__arch_a_p_i.html#gaa79e3c72ee6f1dee4720d0f00958009b" title="Reschedule the CPU. " alt="" coords="896,847,1035,874"/><area shape="rect" id="node47" href="group__kernel.html#ga7619df5a7d0e340ca42ee39bcb6b2cc3" title="Set a specific CPU state. " alt="" coords="1128,391,1232,418"/><area shape="rect" id="node49" href="group__sched.html#ga754b469e7ba40ebd207bee7e1743dd6c" title="Remove a thread from the kill queue. " alt="" coords="1113,208,1247,249"/><area shape="rect" id="node50" href="group__arch_a_p_i.html#gaf680731a9b2e0753de2dfa185b0a13d2" title="Free a stack frame. " alt="" coords="1097,157,1263,183"/><area shape="rect" id="node51" href="group__libc.html#ga069f85a5001d71bc44d8be6532a4e432" title="Free an allocated memory region. " alt="" coords="1386,157,1437,183"/><area shape="rect" id="node52" href="group__mm.html#gac906c2d7849a485d955a895120068e12" title="Free a previously allocated memory region. " alt="" coords="1600,157,1673,183"/><area shape="rect" id="node54" href="group__sched.html#gad02b6c3e73322a0593793f30f8af56c1" title="Return the current thread for a given run queue. " alt="" coords="1348,1253,1475,1279"/><area shape="rect" id="node55" href="group__sched.html#gaa119db667033233b449e211df34dc4c3" title="Add a kill thread. " alt="" coords="1348,1202,1475,1229"/><area shape="rect" id="node56" href="group__sched.html#ga6b05483e9f719152875cb406386fcd5c" title="Add a thread to rq_list. " alt="" coords="1594,1202,1679,1229"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga0be0edad7c14b013f7a4083b645fed6b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void preempt_enable_no_resched </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enable preemption, but do never reschedule. </p>
<dl class="section note"><dt>Note</dt><dd>Only use if you really have to (when you CANNOT reschedule), using preempt_enable results in a fairer and better system. </dd></dl>

</div>
</div>
<a class="anchor" id="ga4e684afa3732b2e8b2f3bc70f055e1a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void preempt_schedule </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reschedule the current run queue with preemption in mind. </p>
<dl class="section note"><dt>Note</dt><dd>Applications generally shouldn't call this function. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__sched.html#gac48128e72b303ea22d8ec641a9516b15" title="Reschedule the current run queue. ">schedule</a> <a class="el" href="group__sched.html#ga9897609e91b475d0c8214b63fd0a7312" title="Reschedule the current run queue. ">__schedule</a> </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Do not use this function in IRQ context.</dd></dl>
<p>This function is the preemption entry point for in-application preemption (such as preemption from preempt_enable). </p>

<p><div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__preempt_ga4e684afa3732b2e8b2f3bc70f055e1a2_cgraph.png" border="0" usemap="#group__preempt_ga4e684afa3732b2e8b2f3bc70f055e1a2_cgraph" alt=""/></div>
<map name="group__preempt_ga4e684afa3732b2e8b2f3bc70f055e1a2_cgraph" id="group__preempt_ga4e684afa3732b2e8b2f3bc70f055e1a2_cgraph">
<area shape="rect" id="node2" href="group__preempt.html#gac48128e72b303ea22d8ec641a9516b15" title="Reschedule the current run queue. " alt="" coords="181,1108,256,1135"/><area shape="rect" id="node3" href="group__atmega.html#ga45e277ef6f2d431ec2bf827fe3fe1127" title="Get the ID of the current CPU. " alt="" coords="1139,980,1225,1007"/><area shape="rect" id="node4" href="group__sched.html#ga9897609e91b475d0c8214b63fd0a7312" title="Reschedule the current run queue. " alt="" coords="304,669,392,696"/><area shape="rect" id="node52" href="group__sched.html#gaa502c4a92f7b7008c0eca9c374d7f671" title="Check if a reschedule is required. " alt="" coords="685,1108,787,1135"/><area shape="rect" id="node5" href="group__kernel.html#ga38f4f8022778edff29606cec22897bfc" title="Notify the CPU of a specific event. " alt="" coords="909,517,992,544"/><area shape="rect" id="node10" href="group__arch_a_p_i.html#gabc3ea24600f8a7b491077f26ccbbd5c8" title="Get the RQ of the given cpu. " alt="" coords="486,568,565,595"/><area shape="rect" id="node12" href="group__thread.html#ga739f7885bb2e863d7d39df7eea03afa5" title="Get a pointer to the current thread. " alt="" coords="898,787,1003,813"/><area shape="rect" id="node14" href="group__sched.html#ga6ddad0126e698368a5b68f214d8f06cc" title="Update the system clock. " alt="" coords="467,720,584,747"/><area shape="rect" id="node15" href="group__sched.html#ga017c639d6dbf8710ad60a22985116618" title="Signal threads that are waiting for an event. " alt="" coords="463,669,587,696"/><area shape="rect" id="node29" href="group__sched.html#ga550ca50260ef89432c99ba6dcc150644" title="Obtain the next runnable task of a run queue. " alt="" coords="440,771,611,797"/><area shape="rect" id="node30" href="group__sched.html#ga902ac489886eb8c3c23a644234e98bb1" title="Check if the algorithm wants to preempt the current thread. " alt="" coords="895,315,1006,341"/><area shape="rect" id="node32" href="group__sched.html#gaaa7887e8e5c82701d2a90a29761a97ed" title="Reschedule policy. " alt="" coords="671,264,801,291"/><area shape="rect" id="node36" href="group__sched.html#ga50b33afa078200d35ad86a7e10287291" title="Set the current thread for rq. " alt="" coords="454,873,597,914"/><area shape="rect" id="node37" href="group__sched.html#ga8e0a4597581707f45d23f718106be969" title="Prepare the a reschedule. " alt="" coords="667,619,805,645"/><area shape="rect" id="node39" href="group__sched.html#ga65b901825618b5227439a55822e9785a" title="Switch context on a given run queue. " alt="" coords="461,87,589,113"/><area shape="rect" id="node41" href="group__sched.html#ga0b1c71305537a28e3a7194016f6b43e6" title="Update a run queue. " alt="" coords="697,923,775,949"/><area shape="rect" id="node43" href="group__sched.html#ga13a5b1237d1c0238dd0432a2590e8195" title="Destroy the kill queue. " alt="" coords="676,1007,796,1033"/><area shape="rect" id="node48" href="group__sched.html#ga2a33aa8e229c79764e00338e98b512ad" title="Kill the current thread if its marked for removal. " alt="" coords="880,112,1021,139"/><area shape="rect" id="node6" href="arch_2avr_2include_2asm_2bitops_8h.html#ad394bdb06d1587dd749fef3e818e82ae" title="Set a bit in a register. " alt="" coords="1151,416,1213,443"/><area shape="rect" id="node7" href="arch_2avr_2include_2asm_2bitops_8h.html#af859dcc9aae25796813cd9b3cb375f18" title="Clear a bit in register. " alt="" coords="1147,213,1217,240"/><area shape="rect" id="node8" href="group__preempt.html#gae772fcbd15beae355371d56d6f443566" title="Disable preemption. " alt="" coords="1123,467,1241,493"/><area shape="rect" id="node9" href="group__preempt.html#ga0be0edad7c14b013f7a4083b645fed6b" title="Enable preemption, but do never reschedule. " alt="" coords="1088,517,1276,544"/><area shape="rect" id="node11" href="group__sched.html#gaa01fb719e9758591f358e30bfb4729ff" title="Get the global run queue. " alt="" coords="1354,624,1461,651"/><area shape="rect" id="node13" href="group__arch_a_p_i.html#ga224ed7aae41f53a7d6f579ebbf3ba7fe" title="Get the run queue of the current CPU. " alt="" coords="1118,664,1246,691"/><area shape="rect" id="node16" href="group__sched.html#ga21bff5f2e0f402ef8b0ccb687570a2fa" title="Signal a thread on a wake queue. " alt="" coords="659,669,813,696"/><area shape="rect" id="node17" href="group__sched.html#gace05e070b7507c5df0d9ae2e6fa7eb50" title="Get the thread_queue the given thread is on. " alt="" coords="891,619,1010,645"/><area shape="rect" id="node18" href="group__sched.html#gae1a79ba3d3d2d109c947be1ee5a03f3d" title="Remove a thread from a rq. " alt="" coords="876,721,1025,762"/><area shape="rect" id="node27" href="group__sched.html#ga2284d061e42560a7bac2dac7c0aa682f" title="Remove a thread from a thread_queue. " alt="" coords="861,669,1040,696"/><area shape="rect" id="node28" href="group__sched.html#ga6bfa8964506ed9b9b7cc8e04c2f2bbf1" title="Add a thread to a run queue. " alt="" coords="885,416,1017,443"/><area shape="rect" id="node19" href="group__irq.html#ga518bb9818fc4064c745c7cdfc612b16b" title="Save IRQ flags and disable them. " alt="" coords="1109,912,1255,939"/><area shape="rect" id="node22" href="group__sched.html#ga79134da818e6f628f51093579aa51107" title="Remove a thread from the rq_list. " alt="" coords="1129,744,1235,771"/><area shape="rect" id="node24" href="group__irq.html#gac43df2a88dde564ea7f7c0331cb2aaae" title="Restore the IRQ flags. " alt="" coords="1141,841,1223,868"/><area shape="rect" id="node20" href="group__arch_a_p_i.html#ga53732d1458648e51671e939c0a929c75" title="Get the IRQ flags. " alt="" coords="1343,945,1471,972"/><area shape="rect" id="node21" href="group__arch_a_p_i.html#gafe72a49160d521a33bb905eca461a3d6" title="Disable the global interrupts. " alt="" coords="1349,895,1465,921"/><area shape="rect" id="node23" href="list_8h.html#ab1708206f0f7e0a56550b35372203ba5" title="Delete an entry from a linked list. " alt="" coords="1376,744,1439,771"/><area shape="rect" id="node25" href="group__arch_a_p_i.html#gaddf161a845a51a829878634b612b3b5a" title="Restore the IRQ flags. " alt="" coords="1332,825,1483,852"/><area shape="rect" id="node26" href="arch_2avr_2include_2asm_2bitops_8h.html#a885c4e4b78de84afaf562fffdf93f178" title="Return the value of bit nr. " alt="" coords="1539,315,1604,341"/><area shape="rect" id="node31" href="group__sched.html#ga334da66e6883352ef369f85803eefec4" title="should_resched_cputime" alt="" coords="1324,315,1491,341"/><area shape="rect" id="node33" href="group__sched.html#ga70e974d78d84a3ef849f69893ed2ca39" title="Reset the time slice for a thread. " alt="" coords="881,365,1020,392"/><area shape="rect" id="node34" href="arch_2avr_2include_2asm_2bitops_8h.html#a262511af13cb368a79082ebf51cad0c7" title="Clear a bit in register and return the value of nr before clearing. " alt="" coords="887,163,1015,189"/><area shape="rect" id="node35" href="group__sched.html#ga0e68a5e318862b42f5472c212668056e" title="Check whether a thread is the idle thread or not. " alt="" coords="1356,264,1459,291"/><area shape="rect" id="node38" href="group__kernel.html#gada0281da446125e1f1a91dd476c4d6d9" title="Get the current CPU state. " alt="" coords="899,955,1003,981"/><area shape="rect" id="node40" href="group__arch_a_p_i.html#gaa79e3c72ee6f1dee4720d0f00958009b" title="Reschedule the CPU. " alt="" coords="667,87,805,113"/><area shape="rect" id="node42" href="group__kernel.html#ga7619df5a7d0e340ca42ee39bcb6b2cc3" title="Set a specific CPU state. " alt="" coords="899,1005,1003,1032"/><area shape="rect" id="node44" href="group__sched.html#ga754b469e7ba40ebd207bee7e1743dd6c" title="Remove a thread from the kill queue. " alt="" coords="883,889,1018,930"/><area shape="rect" id="node45" href="group__arch_a_p_i.html#gaf680731a9b2e0753de2dfa185b0a13d2" title="Free a stack frame. " alt="" coords="868,1107,1033,1133"/><area shape="rect" id="node46" href="group__libc.html#ga069f85a5001d71bc44d8be6532a4e432" title="Free an allocated memory region. " alt="" coords="1157,1107,1207,1133"/><area shape="rect" id="node47" href="group__mm.html#gac906c2d7849a485d955a895120068e12" title="Free a previously allocated memory region. " alt="" coords="1371,1107,1444,1133"/><area shape="rect" id="node49" href="group__sched.html#gad02b6c3e73322a0593793f30f8af56c1" title="Return the current thread for a given run queue. " alt="" coords="1119,163,1245,189"/><area shape="rect" id="node50" href="group__sched.html#gaa119db667033233b449e211df34dc4c3" title="Add a kill thread. " alt="" coords="1119,112,1245,139"/><area shape="rect" id="node51" href="group__sched.html#ga6b05483e9f719152875cb406386fcd5c" title="Add a thread to rq_list. " alt="" coords="1365,112,1450,139"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gad617f8d3f4bc68722e597787b960cde6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void preempt_schedule_irq </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Preempt a thread from IRQ context. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="group__sched.html#ga9897609e91b475d0c8214b63fd0a7312" title="Reschedule the current run queue. ">__schedule</a> <a class="el" href="group__sched.html#gaf4485e5837438cf0f2106c05f9ccdb70" title="Reschedule the current run queue with preemption in mind. ">preempt_schedule</a>. </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Do not use this function outside of IRQ context.</dd></dl>
<p>This function is the entry point to the scheduler from locations where the interrupts are already disabled. The most notable use of this function is the 'off IRQ return' preemption calls. </p>

<p><div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__preempt_gad617f8d3f4bc68722e597787b960cde6_cgraph.png" border="0" usemap="#group__preempt_gad617f8d3f4bc68722e597787b960cde6_cgraph" alt=""/></div>
<map name="group__preempt_gad617f8d3f4bc68722e597787b960cde6_cgraph" id="group__preempt_gad617f8d3f4bc68722e597787b960cde6_cgraph">
<area shape="rect" id="node2" href="group__atmega.html#ga45e277ef6f2d431ec2bf827fe3fe1127" title="Get the ID of the current CPU. " alt="" coords="1038,980,1123,1007"/><area shape="rect" id="node3" href="group__sched.html#ga9897609e91b475d0c8214b63fd0a7312" title="Reschedule the current run queue. " alt="" coords="203,669,291,696"/><area shape="rect" id="node51" href="group__sched.html#gaa502c4a92f7b7008c0eca9c374d7f671" title="Check if a reschedule is required. " alt="" coords="583,1108,686,1135"/><area shape="rect" id="node4" href="group__kernel.html#ga38f4f8022778edff29606cec22897bfc" title="Notify the CPU of a specific event. " alt="" coords="808,517,891,544"/><area shape="rect" id="node9" href="group__arch_a_p_i.html#gabc3ea24600f8a7b491077f26ccbbd5c8" title="Get the RQ of the given cpu. " alt="" coords="385,568,463,595"/><area shape="rect" id="node11" href="group__thread.html#ga739f7885bb2e863d7d39df7eea03afa5" title="Get a pointer to the current thread. " alt="" coords="797,787,902,813"/><area shape="rect" id="node13" href="group__sched.html#ga6ddad0126e698368a5b68f214d8f06cc" title="Update the system clock. " alt="" coords="365,720,483,747"/><area shape="rect" id="node14" href="group__sched.html#ga017c639d6dbf8710ad60a22985116618" title="Signal threads that are waiting for an event. " alt="" coords="362,669,486,696"/><area shape="rect" id="node28" href="group__sched.html#ga550ca50260ef89432c99ba6dcc150644" title="Obtain the next runnable task of a run queue. " alt="" coords="339,771,509,797"/><area shape="rect" id="node29" href="group__sched.html#ga902ac489886eb8c3c23a644234e98bb1" title="Check if the algorithm wants to preempt the current thread. " alt="" coords="794,315,905,341"/><area shape="rect" id="node31" href="group__sched.html#gaaa7887e8e5c82701d2a90a29761a97ed" title="Reschedule policy. " alt="" coords="569,264,700,291"/><area shape="rect" id="node35" href="group__sched.html#ga50b33afa078200d35ad86a7e10287291" title="Set the current thread for rq. " alt="" coords="353,873,495,914"/><area shape="rect" id="node36" href="group__sched.html#ga8e0a4597581707f45d23f718106be969" title="Prepare the a reschedule. " alt="" coords="565,619,704,645"/><area shape="rect" id="node38" href="group__sched.html#ga65b901825618b5227439a55822e9785a" title="Switch context on a given run queue. " alt="" coords="360,87,488,113"/><area shape="rect" id="node40" href="group__sched.html#ga0b1c71305537a28e3a7194016f6b43e6" title="Update a run queue. " alt="" coords="595,923,674,949"/><area shape="rect" id="node42" href="group__sched.html#ga13a5b1237d1c0238dd0432a2590e8195" title="Destroy the kill queue. " alt="" coords="575,1007,695,1033"/><area shape="rect" id="node47" href="group__sched.html#ga2a33aa8e229c79764e00338e98b512ad" title="Kill the current thread if its marked for removal. " alt="" coords="779,112,920,139"/><area shape="rect" id="node5" href="arch_2avr_2include_2asm_2bitops_8h.html#ad394bdb06d1587dd749fef3e818e82ae" title="Set a bit in a register. " alt="" coords="1050,416,1111,443"/><area shape="rect" id="node6" href="arch_2avr_2include_2asm_2bitops_8h.html#af859dcc9aae25796813cd9b3cb375f18" title="Clear a bit in register. " alt="" coords="1045,213,1116,240"/><area shape="rect" id="node7" href="group__preempt.html#gae772fcbd15beae355371d56d6f443566" title="Disable preemption. " alt="" coords="1022,467,1139,493"/><area shape="rect" id="node8" href="group__preempt.html#ga0be0edad7c14b013f7a4083b645fed6b" title="Enable preemption, but do never reschedule. " alt="" coords="987,517,1175,544"/><area shape="rect" id="node10" href="group__sched.html#gaa01fb719e9758591f358e30bfb4729ff" title="Get the global run queue. " alt="" coords="1253,624,1359,651"/><area shape="rect" id="node12" href="group__arch_a_p_i.html#ga224ed7aae41f53a7d6f579ebbf3ba7fe" title="Get the run queue of the current CPU. " alt="" coords="1017,664,1145,691"/><area shape="rect" id="node15" href="group__sched.html#ga21bff5f2e0f402ef8b0ccb687570a2fa" title="Signal a thread on a wake queue. " alt="" coords="557,669,712,696"/><area shape="rect" id="node16" href="group__sched.html#gace05e070b7507c5df0d9ae2e6fa7eb50" title="Get the thread_queue the given thread is on. " alt="" coords="790,619,909,645"/><area shape="rect" id="node17" href="group__sched.html#gae1a79ba3d3d2d109c947be1ee5a03f3d" title="Remove a thread from a rq. " alt="" coords="775,721,924,762"/><area shape="rect" id="node26" href="group__sched.html#ga2284d061e42560a7bac2dac7c0aa682f" title="Remove a thread from a thread_queue. " alt="" coords="760,669,939,696"/><area shape="rect" id="node27" href="group__sched.html#ga6bfa8964506ed9b9b7cc8e04c2f2bbf1" title="Add a thread to a run queue. " alt="" coords="783,416,915,443"/><area shape="rect" id="node18" href="group__irq.html#ga518bb9818fc4064c745c7cdfc612b16b" title="Save IRQ flags and disable them. " alt="" coords="1007,912,1154,939"/><area shape="rect" id="node21" href="group__sched.html#ga79134da818e6f628f51093579aa51107" title="Remove a thread from the rq_list. " alt="" coords="1027,744,1134,771"/><area shape="rect" id="node23" href="group__irq.html#gac43df2a88dde564ea7f7c0331cb2aaae" title="Restore the IRQ flags. " alt="" coords="1039,841,1122,868"/><area shape="rect" id="node19" href="group__arch_a_p_i.html#ga53732d1458648e51671e939c0a929c75" title="Get the IRQ flags. " alt="" coords="1242,945,1370,972"/><area shape="rect" id="node20" href="group__arch_a_p_i.html#gafe72a49160d521a33bb905eca461a3d6" title="Disable the global interrupts. " alt="" coords="1248,895,1364,921"/><area shape="rect" id="node22" href="list_8h.html#ab1708206f0f7e0a56550b35372203ba5" title="Delete an entry from a linked list. " alt="" coords="1275,744,1337,771"/><area shape="rect" id="node24" href="group__arch_a_p_i.html#gaddf161a845a51a829878634b612b3b5a" title="Restore the IRQ flags. " alt="" coords="1231,825,1381,852"/><area shape="rect" id="node25" href="arch_2avr_2include_2asm_2bitops_8h.html#a885c4e4b78de84afaf562fffdf93f178" title="Return the value of bit nr. " alt="" coords="1437,315,1503,341"/><area shape="rect" id="node30" href="group__sched.html#ga334da66e6883352ef369f85803eefec4" title="should_resched_cputime" alt="" coords="1223,315,1389,341"/><area shape="rect" id="node32" href="group__sched.html#ga70e974d78d84a3ef849f69893ed2ca39" title="Reset the time slice for a thread. " alt="" coords="780,365,919,392"/><area shape="rect" id="node33" href="arch_2avr_2include_2asm_2bitops_8h.html#a262511af13cb368a79082ebf51cad0c7" title="Clear a bit in register and return the value of nr before clearing. " alt="" coords="785,163,913,189"/><area shape="rect" id="node34" href="group__sched.html#ga0e68a5e318862b42f5472c212668056e" title="Check whether a thread is the idle thread or not. " alt="" coords="1255,264,1357,291"/><area shape="rect" id="node37" href="group__kernel.html#gada0281da446125e1f1a91dd476c4d6d9" title="Get the current CPU state. " alt="" coords="797,955,901,981"/><area shape="rect" id="node39" href="group__arch_a_p_i.html#gaa79e3c72ee6f1dee4720d0f00958009b" title="Reschedule the CPU. " alt="" coords="565,87,704,113"/><area shape="rect" id="node41" href="group__kernel.html#ga7619df5a7d0e340ca42ee39bcb6b2cc3" title="Set a specific CPU state. " alt="" coords="797,1005,901,1032"/><area shape="rect" id="node43" href="group__sched.html#ga754b469e7ba40ebd207bee7e1743dd6c" title="Remove a thread from the kill queue. " alt="" coords="782,889,917,930"/><area shape="rect" id="node44" href="group__arch_a_p_i.html#gaf680731a9b2e0753de2dfa185b0a13d2" title="Free a stack frame. " alt="" coords="767,1107,932,1133"/><area shape="rect" id="node45" href="group__libc.html#ga069f85a5001d71bc44d8be6532a4e432" title="Free an allocated memory region. " alt="" coords="1055,1107,1106,1133"/><area shape="rect" id="node46" href="group__mm.html#gac906c2d7849a485d955a895120068e12" title="Free a previously allocated memory region. " alt="" coords="1269,1107,1343,1133"/><area shape="rect" id="node48" href="group__sched.html#gad02b6c3e73322a0593793f30f8af56c1" title="Return the current thread for a given run queue. " alt="" coords="1017,163,1144,189"/><area shape="rect" id="node49" href="group__sched.html#gaa119db667033233b449e211df34dc4c3" title="Add a kill thread. " alt="" coords="1017,112,1144,139"/><area shape="rect" id="node50" href="group__sched.html#ga6b05483e9f719152875cb406386fcd5c" title="Add a thread to rq_list. " alt="" coords="1263,112,1349,139"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="gaa93580e45d2e6c581a96c72bfbd51212"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="include_2etaos_2types_8h.html#a97a80ca1602ebf2303258971a2c938e2">bool</a> preempt_should_resched </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if the current thread should be rescheduled. </p>
<dl class="section note"><dt>Note</dt><dd>The difference between should_resched and preempt_should_resched is is that should_resched only checks if THREAD_NEED_RESCHED_FLAG is set, preempt_should_resched also checks if the timeslice has expired. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if the system should reschedule. </td></tr>
    <tr><td class="paramname">false</td><td>if the system doesn't need to reschedule. </td></tr>
  </table>
  </dd>
</dl>

<p><div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__preempt_gaa93580e45d2e6c581a96c72bfbd51212_cgraph.png" border="0" usemap="#group__preempt_gaa93580e45d2e6c581a96c72bfbd51212_cgraph" alt=""/></div>
<map name="group__preempt_gaa93580e45d2e6c581a96c72bfbd51212_cgraph" id="group__preempt_gaa93580e45d2e6c581a96c72bfbd51212_cgraph">
<area shape="rect" id="node2" href="group__thread.html#ga739f7885bb2e863d7d39df7eea03afa5" title="Get a pointer to the current thread. " alt="" coords="381,5,487,32"/><area shape="rect" id="node5" href="arch_2avr_2include_2asm_2bitops_8h.html#a885c4e4b78de84afaf562fffdf93f178" title="Return the value of bit nr. " alt="" coords="401,68,467,95"/><area shape="rect" id="node6" href="group__preempt.html#gada97a499438abc44548acb43e582dc73" title="Check if a reschedule is needed. " alt="" coords="220,31,333,57"/><area shape="rect" id="node3" href="group__arch_a_p_i.html#ga224ed7aae41f53a7d6f579ebbf3ba7fe" title="Get the run queue of the current CPU. " alt="" coords="535,5,663,32"/><area shape="rect" id="node4" href="group__sched.html#gaa01fb719e9758591f358e30bfb4729ff" title="Get the global run queue. " alt="" coords="711,5,817,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga30a3151baa4664f4c58d9f6e04c4df0e"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int preempt_test </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Test if preemption is enabled. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">true</td><td>if preemption is enabled. </td></tr>
    <tr><td class="paramname">false</td><td>if preemption is not enabled. </td></tr>
  </table>
  </dd>
</dl>

<p><div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><img src="group__preempt_ga30a3151baa4664f4c58d9f6e04c4df0e_cgraph.png" border="0" usemap="#group__preempt_ga30a3151baa4664f4c58d9f6e04c4df0e_cgraph" alt=""/></div>
<map name="group__preempt_ga30a3151baa4664f4c58d9f6e04c4df0e_cgraph" id="group__preempt_ga30a3151baa4664f4c58d9f6e04c4df0e_cgraph">
<area shape="rect" id="node2" href="group__preempt.html#gab377aa939771256f71f426bd7650b01a" title="Get the preemption counter pointer of the current thread. " alt="" coords="152,5,293,32"/><area shape="rect" id="node3" href="group__thread.html#ga739f7885bb2e863d7d39df7eea03afa5" title="Get a pointer to the current thread. " alt="" coords="341,5,447,32"/><area shape="rect" id="node4" href="group__arch_a_p_i.html#ga224ed7aae41f53a7d6f579ebbf3ba7fe" title="Get the run queue of the current CPU. " alt="" coords="495,5,623,32"/><area shape="rect" id="node5" href="group__sched.html#gaa01fb719e9758591f358e30bfb4729ff" title="Get the global run queue. " alt="" coords="671,5,777,32"/></map>
</div>
</p>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated on Mon Nov 27 2017 23:44:47 for ETA/OS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
